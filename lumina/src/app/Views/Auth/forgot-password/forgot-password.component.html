<app-header></app-header>
<body class="min-h-screen bg-slate-50">
  <main class="max-w-6xl mx-auto px-4 py-10">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-stretch">
      <div
        class="relative rounded-2xl overflow-hidden border border-slate-200 bg-white shadow-lg hidden md:block"
      >
        <img
          src="/assets/images/lumina-toeic.png"
          alt="Lumina TOEIC"
          class="w-full h-full object-cover"
          loading="lazy"
        />
      </div>

      <div class="auth-card glass">
        <div class="auth-header" style="margin-top: 20px">
          <h1>Quên mật khẩu</h1>
          <p>Nhập email để nhận mã xác nhận và đặt lại mật khẩu.</p>
        </div>

        <!-- Steps -->
        @if (currentStep === 1) {
        <form
          [formGroup]="emailForm"
          (ngSubmit)="onEmailSubmit()"
          class="auth-form"
        >
          <div class="field">
            <h2>Nhập email của bạn</h2>
            <div class="input-wrap">
              <input
                formControlName="email"
                type="email"
                required
                placeholder="you@example.com"
              />
            </div>
          </div>

          <button type="submit" [disabled]="isLoading" class="btn btn-primary">
            <i *ngIf="isLoading" class="fas fa-spinner animate-spin"></i>
            <span>{{ isLoading ? "Đang gửi..." : "Gửi mã xác nhận" }}</span>
          </button>

          <div class="auth-footer">
            <a routerLink="/login">Quay lại trang Đăng nhập</a>
          </div>
        </form>
        } @else if (currentStep === 2) {
        <form
          [formGroup]="resetForm"
          (ngSubmit)="onResetSubmit()"
          class="auth-form"
        >
          <div class="field">
            <label>Mã OTP (6 chữ số)</label>
            <div class="input-wrap">
              <input
                formControlName="otpCode"
                type="text"
                inputmode="numeric"
                placeholder="123456"
              />
            </div>
          </div>

          <div class="field">
            <label>Mật khẩu mới</label>
            <div class="input-wrap">
              <input
                formControlName="newPassword"
                type="password"
                placeholder="••••••••"
                minlength="6"
                required
              />
            </div>
          </div>

          <div class="field">
            <label>Xác nhận mật khẩu mới</label>
            <div class="input-wrap">
              <input
                formControlName="confirmPassword"
                type="password"
                placeholder="••••••••"
                minlength="6"
                required
              />
            </div>
          </div>

          <button type="submit" [disabled]="isLoading" class="btn btn-primary">
            <i *ngIf="isLoading" class="fas fa-spinner animate-spin"></i>
            <span>{{ isLoading ? "Đang xử lý..." : "Đặt lại mật khẩu" }}</span>
          </button>

          <div class="auth-footer">
            <a routerLink="/login">Quay lại trang Đăng nhập</a>
          </div>
        </form>
        }
      </div>
    </div>
  </main>
</body>
