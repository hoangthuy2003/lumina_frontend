<div class="vocabulary-container">
  <!-- Header Section -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">Qu·∫£n l√Ω t·ª´ v·ª±ng</h1>
      <p class="page-subtitle">T·∫°o v√† qu·∫£n l√Ω b·ªô t·ª´ v·ª±ng TOEIC</p>
    </div>
    <div class="header-actions">
      <button class="btn-primary" (click)="openModal()">
        <i class="fas fa-plus"></i>
        Th√™m t·ª´ v·ª±ng m·ªõi
      </button>
    </div>
  </div>

  <!-- Main Content Layout -->
  <div class="main-layout">
    <!-- Left Content -->
    <div class="vocabulary-list">
      <!-- Loading State -->
      <div class="loading-state" *ngIf="isLoading">
        <i class="fas fa-spinner fa-spin"></i>
        <p>ƒêang t·∫£i t·ª´ v·ª±ng...</p>
      </div>

      <!-- Vocabulary Items -->
      <div class="vocabulary-item" *ngFor="let vocab of pagedVocabularies">
        <!-- Word Header -->
        <div class="word-header">
          <div class="word-title">
            <h3 class="word">{{ vocab.word }}</h3>
            <span class="pronunciation">{{ vocab.pronunciation }}</span>
          </div>
          <div class="word-actions">
            <span class="category-tag" [class]="'color-' + getCategoryColor(vocab.category)">
              {{ getCategoryIcon(vocab.category) }} {{ getCategoryName(vocab.category) }}
            </span>
            <button class="btn-action btn-edit" (click)="openModal(vocab)">
              <i class="fas fa-edit"></i>
            </button>
            <button class="btn-action btn-delete" (click)="deleteVocabulary(vocab.id)">
              <i class="fas fa-trash"></i>
            </button>
          </div>

        </div>



        <!-- Word Content -->
        <div class="word-content">
          <div class="word-info">
            <span class="pos-tag" [class]="getPartOfSpeechClass(vocab.partOfSpeech)">
              {{ vocab.partOfSpeech }}:
            </span>
            <span class="definition">{{ vocab.translation }}</span>
          </div>

          <div class="example-section">
            <div class="example-label">V√≠ d·ª•:</div>
            <div class="example-text">{{ vocab.example }}</div>
          </div>

          <div class="translation-section">
            <div class="translation-label">D·ªãch:</div>
            <div class="translation-text">{{ vocab.definition }}</div>
          </div>
        </div>
      </div>
     <!-- Pagination -->
<div 
  class="flex items-center justify-center gap-4 mt-6"
  *ngIf="!isLoading && filteredVocabularies.length > 0"
>
  <!-- Prev button -->
  <button
    (click)="prevPage()"
    [disabled]="page === 1"
    class="flex items-center gap-2 px-4 py-2 rounded-lg border border-gray-300 bg-white text-gray-700 
           hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition"
  >
    <i class="fas fa-chevron-left"></i>
    <span>Trang tr∆∞·ªõc</span>
  </button>

  <!-- Page info -->
  <div class="px-4 py-2 text-sm font-medium text-gray-600 bg-gray-50 rounded-lg shadow-sm">
    Trang <span class="font-semibold text-gray-900">{{ page }}</span>
    / {{ totalPages }} ¬∑ T·ªïng
    <span class="font-semibold text-gray-900">{{ totalItems | number }}</span> t·ª´
  </div>

  <!-- Next button -->
  <button
    (click)="nextPage()"
    [disabled]="page === totalPages"
    class="flex items-center gap-2 px-4 py-2 rounded-lg border border-gray-300 bg-white text-gray-700 
           hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition"
  >
    <span>Trang sau</span>
    <i class="fas fa-chevron-right"></i>
  </button>
</div>


      <!-- Empty State -->
      <div class="empty-state" *ngIf="filteredVocabularies.length === 0">
        <i class="fas fa-spell-check"></i>
        <h3>Kh√¥ng t√¨m th·∫•y t·ª´ v·ª±ng n√†o</h3>
        <p>H√£y th·ª≠ thay ƒë·ªïi b·ªô l·ªçc ho·∫∑c th√™m t·ª´ v·ª±ng m·ªõi</p>
      </div>
    </div>

    <!-- Right Sidebar -->
    <div class="vocabulary-sidebar">
      <!-- Statistics Section -->
      <div class="stats-card">
        <div class="stats-header">
          <i class="fas fa-chart-bar"></i>
          <h3>Th·ªëng k√™ t·ª´ v·ª±ng</h3>
        </div>
        <div class="stats-content">
          <div class="total-count">
            <span class="count-label">T·ªïng t·ª´ v·ª±ng</span>
            <span class="count-number">{{ getTotalStats() | number }}</span>
          </div>

          <div class="category-stats">
            <div class="category-stat" *ngFor="let list of vocabularyLists">
              <div class="category-info">
                <span class="category-icon">üìö</span>
                <span class="category-name">{{ list.name }}</span>
              </div>
              <span class="category-count">{{ list.vocabularyCount }}</span>
            </div>
          </div>

          <div class="filtered-count" *ngIf="searchTerm || selectedList || selectedPartOfSpeech">
            <span class="count-label">K·∫øt qu·∫£ hi·ªán t·∫°i</span>
            <span class="count-number">{{ filteredVocabularies.length | number }}</span>
          </div>
        </div>
      </div>

      <!-- Quick Add Section -->
      <div class="quick-add-card">
        <div class="quick-add-header">
          <i class="fas fa-plus-circle"></i>
          <h3>Th√™m nhanh</h3>
        </div>
        <form class="quick-add-form">
          <div class="form-group">
            <input type="text" placeholder="T·ª´ v·ª±ng" name="quickWord">
          </div>
          <div class="form-group">
            <input type="text" placeholder="Phi√™n √¢m" name="quickPronunciation">
          </div>
          <div class="form-group">
            <input type="text" placeholder="Nghƒ©a ti·∫øng Vi·ªát" name="quickTranslation">
          </div>
          <div class="form-group">
            <select name="quickDifficulty">
              <option value="">Ch·ªçn ch·ªß ƒë·ªÅ</option>
              <option *ngFor="let category of categories" [value]="category.id">
                {{ category.icon }} {{ category.name }}
              </option>
            </select>
          </div>
          <button type="submit" class="btn-quick-add">Th√™m t·ª´ v·ª±ng</button>
        </form>
      </div>

      <!-- Filters Section -->
      <div class="filters-card">
        <div class="filters-header">
          <i class="fas fa-filter"></i>
          <h3>B·ªô l·ªçc</h3>
          <button class="btn-clear-filters" (click)="clearAllFilters()" title="X√≥a t·∫•t c·∫£ b·ªô l·ªçc">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="filters-content">
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" placeholder="T√¨m ki·∫øm t·ª´ v·ª±ng..." [(ngModel)]="searchTerm" (input)="onSearchChange()">
            <button class="btn-clear-search" *ngIf="searchTerm" (click)="clearSearch()" title="X√≥a t√¨m ki·∫øm">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <div class="filter-group">
            <label>Danh s√°ch t·ª´ v·ª±ng</label>
            <select [(ngModel)]="selectedList" (change)="onListChange()">
              <option value="">T·∫•t c·∫£ danh s√°ch</option>
              <option *ngFor="let list of vocabularyLists" [value]="list.vocabularyListId">
                {{ list.name }} ({{ list.vocabularyCount }} t·ª´)
              </option>
            </select>
          </div>

          <div class="filter-group">
            <label>ƒê·ªô kh√≥</label>
            <select [(ngModel)]="selectedDifficulty" (change)="onDifficultyChange()">
              <option value="">T·∫•t c·∫£ ƒë·ªô kh√≥</option>
              <option *ngFor="let difficulty of difficulties" [value]="difficulty">
                {{ difficulty }}
              </option>
            </select>
          </div>

          <div class="filter-group">
            <label>T·ª´ lo·∫°i</label>
            <select [(ngModel)]="selectedPartOfSpeech" (change)="onPartOfSpeechChange()">
              <option value="">T·∫•t c·∫£ t·ª´ lo·∫°i</option>
              <option *ngFor="let pos of partsOfSpeech" [value]="pos">
                {{ pos }}
              </option>
            </select>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal gi·ªØ nguy√™n nh∆∞ c≈© -->
<div class="modal-overlay" *ngIf="isModalOpen" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <div class="modal-header-content">
        <div class="modal-icon">
          <i class="fas fa-spell-check"></i>
        </div>
        <div class="modal-title-section">
          <h2>{{ editingVocabulary ? 'Ch·ªânh s·ª≠a t·ª´ v·ª±ng' : 'Th√™m t·ª´ v·ª±ng m·ªõi' }}</h2>
          <p>Nh·∫≠p th√¥ng tin chi ti·∫øt v·ªÅ t·ª´ v·ª±ng</p>
        </div>
      </div>
      <button class="btn-close" (click)="closeModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <form [formGroup]="vocabularyForm" (ngSubmit)="saveVocabulary()" class="modal-form">
      <!-- Form content gi·ªØ nguy√™n nh∆∞ tr∆∞·ªõc -->
      <div class="form-row">
        <div class="form-group">
          <label for="word">T·ª´ v·ª±ng *</label>
          <input type="text" id="word" formControlName="word" placeholder="VD: accomplish">
          <div class="error-message"
            *ngIf="vocabularyForm.get('word')?.errors?.['required'] && vocabularyForm.get('word')?.touched">
            T·ª´ v·ª±ng l√† b·∫Øt bu·ªôc
          </div>
        </div>

        <div class="form-group">
          <label for="pronunciation">Phi√™n √¢m *</label>
          <input type="text" id="pronunciation" formControlName="pronunciation" placeholder="VD: /…ôÀàk åmpl…™ É/">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="category">Danh m·ª•c *</label>
          <select id="category" formControlName="category">
            <option value="">Ch·ªçn danh m·ª•c</option>
            <option *ngFor="let category of categories" [value]="category.id">
              {{ category.icon }} {{ category.name }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <label for="partOfSpeech">T·ª´ lo·∫°i *</label>
          <select id="partOfSpeech" formControlName="partOfSpeech">
            <option value="">Ch·ªçn t·ª´ lo·∫°i</option>
            <option *ngFor="let pos of partsOfSpeech" [value]="pos">
              {{ pos }}
            </option>
          </select>
        </div>
      </div>

      <div class="form-group">
        <label for="difficulty">ƒê·ªô kh√≥ *</label>
        <select id="difficulty" formControlName="difficulty">
          <option value="">Ch·ªçn ƒë·ªô kh√≥</option>
          <option *ngFor="let difficulty of difficulties" [value]="difficulty">
            {{ difficulty }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label for="definition">ƒê·ªãnh nghƒ©a (ti·∫øng Anh) *</label>
        <textarea id="definition" formControlName="definition" rows="3"
          placeholder="Nh·∫≠p ƒë·ªãnh nghƒ©a b·∫±ng ti·∫øng Anh..."></textarea>
      </div>

      <div class="form-group">
        <label for="example">V√≠ d·ª• *</label>
        <textarea id="example" formControlName="example" rows="2" placeholder="Nh·∫≠p c√¢u v√≠ d·ª•..."></textarea>
      </div>

      <div class="form-group">
        <label for="translation">B·∫£n d·ªãch (ti·∫øng Vi·ªát) *</label>
        <input type="text" id="translation" formControlName="translation" placeholder="Nh·∫≠p b·∫£n d·ªãch ti·∫øng Vi·ªát...">
      </div>

      <div class="modal-actions">
        <button type="button" class="btn-secondary" (click)="closeModal()">
          H·ªßy
        </button>
        <button type="submit" class="btn-primary" [disabled]="!vocabularyForm.valid || isSubmitting">
          <span *ngIf="isSubmitting" class="loading-spinner"></span>
          {{ isSubmitting ? 'ƒêang x·ª≠ l√Ω...' : (editingVocabulary ? 'C·∫≠p nh·∫≠t' : 'Th√™m m·ªõi') }}
        </button>
      </div>
    </form>

  </div>
</div>